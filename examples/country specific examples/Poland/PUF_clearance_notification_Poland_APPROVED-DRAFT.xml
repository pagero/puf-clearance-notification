<?xml version="1.0"?>
<ApplicationResponse xmlns="urn:oasis:names:specification:ubl:schema:xsd:ApplicationResponse-2"
    xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
    xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
    xmlns:ext="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2"
    xmlns:puf="urn:pagero:ExtensionComponent:1.0">
    
    <!-- NOTE that this is a draft example. There will be changes/updates. Track the GITHUB page for PUF to see changes and updates. -->
    
    <!-- CustomizationID. Specification identification -->
    <cbc:CustomizationID>urn:pagero.com:puf:clearance_notification:1.0</cbc:CustomizationID>

    <!-- ProfileID. Business process type identifier -->
    <cbc:ProfileID>urn:pagero.com:puf:clearance_notification:1.0</cbc:ProfileID>

    <!-- Response identifier. A unique id to identify the response. -->
    <cbc:ID>20251110-EE-2924569601-65D14DAC91-71</cbc:ID>

    <!-- cbc:IssueDate -->
    <cbc:IssueDate>2025-11-10</cbc:IssueDate>
    
    <!-- cbc:IssueTime-->
    <cbc:IssueTime>12:01:21</cbc:IssueTime>

    <!-- cac:SenderParty. Sender information -->
    <cac:SenderParty>
        <cac:PartyName>
            <cbc:Name>KSeF</cbc:Name>
        </cac:PartyName>
    </cac:SenderParty>

    <!-- cac:ReceiverParty. Receiver information -->
    <cac:ReceiverParty>
        <cac:PartyLegalEntity>
            <cbc:RegistrationName>Seller company name</cbc:RegistrationName>
        </cac:PartyLegalEntity>
    </cac:ReceiverParty>

    <!-- cac:DocumentResponse. Document response -->
    <cac:DocumentResponse>

        <!-- Response information -->
        <cac:Response>
            
            <ext:UBLExtensions>
                <ext:UBLExtension>
                    <ext:ExtensionURI>urn:pagero:ExtensionComponent:1.0:PageroExtension:ResponseExtension</ext:ExtensionURI>
                    <ext:ExtensionContent>
                        <puf:PageroExtension>
                            <puf:ResponseExtension>
                                <!-- Calculated invoiceHash, a component used to create QR codes. SHA256 hash of the invoice, encoded in Base64 format. -->
                                <puf:RestrictedInformation>
                                   <puf:Key>invoiceHash</puf:Key>
                                   <puf:Value>eT5l6I9I8xGGeBvSuTqr6r6kK1T8BdqgxGmK51LO8mY=</puf:Value>
                                </puf:RestrictedInformation>
                                <!-- Date of assignment of the KSeF number. -->
                                <puf:RestrictedInformation>
                                   <puf:Key>acquisitionDate</puf:Key>
                                   <puf:Value>2025-11-10T11:59:00.3189919+00:00</puf:Value>
                                </puf:RestrictedInformation>
                                <!-- Date of receipt of the invoice in the KSeF system (for further processing). -->
                                <puf:RestrictedInformation>
                                   <puf:Key>invoicingDate</puf:Key>
                                   <puf:Value>2025-11-10T11:57:04.6705228+00:00</puf:Value>
                                </puf:RestrictedInformation>
                                <!-- Download address for the UPO. Access is via the method HTTP GET, and no access token should be sent. 
                                The link expires after a specified time which is provided in 'UpoDownloadUrlExpirationDate'. -->
                                <puf:RestrictedInformation>
                                   <puf:Key>upoDownloadUrl</puf:Key>
                                   <puf:Value>https://ksef-test.mf.gov.pl/storage/05/20251110-sb-28fa501000-bbdf6c7d14-77/invoice-upo/upo_5213938277-20251110-0100C09B4853-FE.xml?skoid=0e92608a-831d-404b-8925-197ed82a5dbc&amp;sktid=647734c6-3974-4441-a425-c61941b61c69&amp;skt=2025-11-07T15%3A23%3A05Z&amp;ske=2025-11-14T15%3A23%3A05Z&amp;sks=b&amp;skv=2025-01-05&amp;sv=2025-01-05&amp;st=2025-11-10T11%3A55%3A01Z&amp;se=2025-11-13T12%3A00%3A01Z&amp;sr=b&amp;sp=r&amp;sig=uCYZ1rPZS6oZW2LbzHck0zZPNDsmFFUoXlqNjbHqXJY%3Y</puf:Value>
                                </puf:RestrictedInformation>
                                <!-- The address's expiration date and time. After this, the link in 'UpoDownloadUrl' will no longer be active. -->
                                <puf:RestrictedInformation>
                                   <puf:Key>upoDownloadUrlExpirationDate</puf:Key>
                                   <puf:Value>2025-11-13T12:00:01.7759834+00:00</puf:Value>
                                </puf:RestrictedInformation>
                                <!-- The interchange id of the referenced document. Only if an id was provided by the issuer -->
                                <puf:ReferencedDocumentInterchangeID>
                                   <cbc:ID>123456789</cbc:ID>
                                </puf:ReferencedDocumentInterchangeID>
                                <!-- KSeF Reference Number. -->
                                <puf:ClearanceReferenceID>
                                   <cbc:ID>5213938276-20251110-0100C09B4852-FE</cbc:ID>
                                </puf:ClearanceReferenceID>
                                <!-- This is QR code 1 (Online Mode) generated by Pagero. -->
                                <puf:ClearanceQR>
                                    <puf:QRString>https://ksef-test.mf.gov.pl/client-app/invoice/1111111111/10-11-2025/UtQp9Gpc51y-u3xApZjIjgkpZ01js-J8KflSPW8WzIE</puf:QRString>
                                </puf:ClearanceQR>
                            </puf:ResponseExtension>
                        </puf:PageroExtension>
                    </ext:ExtensionContent>
                </ext:UBLExtension>
            </ext:UBLExtensions>

            <!-- Response Code:
                Possible clearance response codes
                APPROVED = Approved by Clearance Authority
                REJECTED = Rejected by Clearance Authority.
            -->
            <cbc:ResponseCode>APPROVED</cbc:ResponseCode>

            <!-- Clarification if applicable. -->
            <cac:Status>
                <!-- StatusReasonCode. Returned by clearance authority. If available-->
                <cbc:StatusReasonCode>200</cbc:StatusReasonCode>
                <!-- StatusReason. Reason for clarification. If available-->
                <cbc:StatusReason>Sukces</cbc:StatusReason>
            </cac:Status>
        </cac:Response>
        
        <cac:DocumentReference>
            <!-- Reference to the invoice (invoice number) -->
            <cbc:ID>INV002</cbc:ID>
            <!-- The date when the invoice was issued -->
            <cbc:IssueDate>2025-11-10</cbc:IssueDate>
            <!-- DocumentTypeCode. The invoice type in the referenced invoice -->
            <cbc:DocumentTypeCode>380</cbc:DocumentTypeCode>
        </cac:DocumentReference>
    </cac:DocumentResponse>
</ApplicationResponse>
